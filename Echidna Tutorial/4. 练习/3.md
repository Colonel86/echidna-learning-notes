## 目标合约
我们将测试以下合约[exercises/exercise3/token.sol](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/exercises/exercise3/token.sol)：
```
 contract Ownership{
    address owner = msg.sender;
    constructor() public {
        owner = msg.sender;
    }
     modifier isOwner(){
         require(owner == msg.sender);
         _;
      }
   }

  contract Pausable is Ownership{
     bool is_paused;
     modifier ifNotPaused(){
          require(!is_paused);
          _;
      }

      function paused() isOwner public{
          is_paused = true;
      }

      function resume() isOwner public{
          is_paused = false;
      }
   }

   contract Token is Pausable{
      mapping(address => uint) public balances;
      function transfer(address to, uint value) ifNotPaused public{
            require(balances[msg.sender] >= value);
            balances[msg.sender] -= value;
            balances[to] += value;
       }
    }
```
## 使用自定义初始化进行测试
考虑以下令牌扩展 (exercises/exercise3/mintable.sol)：
```
   import "token.sol";
   contract MintableToken is Token{
      int totalMinted;
      int totalMintable;

      constructor(int _totalMintable) public {
         totalMintable = _totalMintable;
      }

      function mint(uint value) isOwner() public{
          require(int(value) + totalMinted < totalMintable);
          totalMinted += int(value);
          balances[msg.sender] += value;
       }
    }
```

[token.sol](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/exercises/exercise3/token.sol#L1) 的版本包含之前练习的修复。

#### 目标
- 创建一个场景，其中 `echidna_caller (msg.sender)` 在构建时成为合约的所有者，`totalMintable` 设置为 10,000。 回想一下，Echidna 需要一个没有参数的构造函数。
- 添加一个属性来检查 `echidna_caller` 是否可以铸造超过 10,000 个令牌。
- 一旦 Echidna 发现错误，解决问题，然后用 Echidna 重新尝试您的property。
  
这个练习的框架是（[exercises/exercise3/template.sol](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/exercises/exercise3/template.sol)）：

```
   import "mintable.sol";
   contract TestToken is MintableToken {
      address echidna_caller = msg.sender;

      // update the constructor
      constructor() public MintableToken(10000) {
        owner = echidna_caller;
      }

      // add the property
      function echidna_test_balance() public view returns (bool) {
        return balances[msg.sender] <= 10000;
      }
   }
```

```
echidna-test ./contracts/exercises/exercise3/TestToken.sol --contract TestToken
```

```
echidna_test_balance: FAILED! with ReturnFalse

 Call sequence: 
  1. mint(100430644870492384117551051524300761003769422309655710395926226179086013661872) Time delay: 20718 seconds
  	Block delay: 2567
  2.transfer(0x10000,21200239704244155139828794811202860107258155899075985604108890399626823488283) Time delay: 358140
```