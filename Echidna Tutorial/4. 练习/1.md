## 目标合约
我们将测试以下合约练习[/exercise1/token.sol](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/exercises/exercise1/token.sol)：

```
 contract Ownership{
    address owner = msg.sender;
    function Owner(){
         owner = msg.sender;
     }
     modifier isOwner(){
         require(owner == msg.sender);
         _;
      }
   }

  contract Pausable is Ownership{
     bool is_paused;
     modifier ifNotPaused(){
              require(!is_paused);
              _;
      }

      function paused() isOwner public{
          is_paused = true;
      }

      function resume() isOwner public{
          is_paused = false;
      }
   }

   contract Token is Pausable{
      mapping(address => uint) public balances;
      function transfer(address to, uint value) ifNotPaused public{
           balances[msg.sender] -= value; 
           balances[to] += value;
       }
    }

```
## 测试代币余额
#### 目标
- 添加一个property来检查 `echidna_caller` 的初始余额不能超过 10000。
- 一旦 Echidna 发现错误，解决问题，并与 Echidna 重新检查您的财产。

这个练习的框架是（[exercises/exercise1/template.sol](https://github.com/crytic/building-secure-contracts/blob/master/program-analysis/echidna/exercises/exercise1/template.sol)）：

```
import "token.sol";
contract TestToken is Token {
    address echidna_caller = msg.sender;

    constructor() public{
        balances[echidna_caller] = 10000;
    }
    // add the property
    function echidna_test_balance() public view returns (bool) {
        return balances[echidna_caller] <= 10000;
    }
}
```

## 执行
```
echidna-test ./contracts/exercises/exercise1/solution.sol
```
注意：0.8.x内置了safamath，所以结果是passed
0.8.x以前的版本会failed

0.4.x版本的效果
```
echidna_test_balance: FAILED! with ReturnFalse
Call sequence: 
1.transfer(0x4623ddc01143cf7ebf5e27d9a461c73ebda3437f,996191846123693960942075583068349207674041033366695193480791895
Time delay: 232401 seconds Block delay: 53758
```