## Setup
1. Clone the repo: `git clone https://github.com/crytic/damn-vulnerable-defi-echidna`
2. install the dependencies via `yarn install`.

## Context
æ­¤å¤„æè¿°äº†æŒ‘æˆ˜ï¼šhttps://www.damnvulnerabledefi.xyz/challenges/2.htmlï¼Œæˆ‘ä»¬å‡è®¾è¯»è€…ç†Ÿæ‚‰å®ƒã€‚

## Goals
- ä½¿ç”¨æ­£ç¡®çš„åˆçº¦å’Œå¿…è¦çš„ä½™é¢è®¾ç½®æµ‹è¯•ç¯å¢ƒã€‚
- åˆ†æ test/naive-receiver/naive-receiver.challenge.js ä¸­çš„ before å‡½æ•°ï¼Œä»¥ç¡®å®šéœ€è¦è¿›è¡Œå“ªäº›åˆå§‹è®¾ç½®ã€‚
- æ·»åŠ ä¸€ä¸ªpropertyæ¥æ£€æŸ¥ FlashLoanReceiver åˆçº¦çš„ä½™é¢æ˜¯å¦å¯ä»¥æ”¹å˜ã€‚
- ä½¿ç”¨å¿…è¦çš„é…ç½®é€‰é¡¹åˆ›å»ºä¸€ä¸ª config.yamlã€‚
- ä¸€æ—¦ Echidna å‘ç°é”™è¯¯ï¼Œè§£å†³é—®é¢˜ï¼Œç„¶åç”¨ Echidna é‡æ–°å°è¯•æ‚¨çš„propertyã€‚

åªæœ‰ä»¥ä¸‹åˆåŒæ˜¯ç›¸å…³çš„ï¼š
- `contracts/naive-receiver/FlashLoanReceiver.sol`
- `contracts/naive-receiver/NaiveReceiverLenderPool.sol`

## Hints
æˆ‘ä»¬å»ºè®®å…ˆå°è¯•ï¼Œä¸è¦é˜…è¯»ä»¥ä¸‹æç¤ºã€‚ æç¤ºåœ¨æç¤ºåˆ†æ”¯ä¸­ã€‚

- æˆ‘ä»¬è¦æ‰¾çš„ä¸å˜é‡æ˜¯â€œæ¥æ”¶æ–¹åˆçº¦çš„ä½™é¢ä¸èƒ½å‡å°‘â€
- é˜…è¯»ä»€ä¹ˆæ˜¯å¤š abi é€‰é¡¹
- åœ¨contracts/naive-receiver/NaiveReceiverEchidna.sol ä¸­æä¾›äº†ä¸€ä¸ªæ¨¡æ¿
- naivereceiver.yaml ä¸­æä¾›äº†ä¸€ä¸ªé…ç½®æ–‡ä»¶

## Solution
æ­¤è§£å†³æ–¹æ¡ˆå¯ä»¥åœ¨è§£å†³æ–¹æ¡ˆåˆ†æ”¯ä¸­æ‰¾åˆ°ã€‚

è§£å†³æ–¹æ¡ˆè§£é‡Šï¼ˆå‰é¢æœ‰å‰§é€ï¼‰
å¤©çœŸçš„æ¥æ”¶è€…æŒ‘æˆ˜çš„ç›®æ ‡æ˜¯å®ç°ä»»æ„ç”¨æˆ·å¯ä»¥è°ƒç”¨è¯·æ±‚ FlashLoanReceiver çš„å¿«é€Ÿè´·æ¬¾ã€‚ äº‹å®ä¸Šï¼Œå³ä½¿ä»»æ„ç”¨æˆ·æ²¡æœ‰ä»¥å¤ªï¼Œä¹Ÿå¯ä»¥è¿™æ ·åšã€‚

Echidna é€šè¿‡ç®€å•åœ°ä½¿ç”¨ `FlashLoanReceiver` çš„åœ°å€å’Œä»»æ„æ•°é‡è°ƒç”¨ `NaiveReceiverLenderPool.flashLoan()` æ¥å‘ç°è¿™ä¸€ç‚¹ã€‚

è¯·å‚é˜… Echidna çš„ä»¥ä¸‹ç¤ºä¾‹è¾“å‡ºï¼š
```
echidna-test . --contract NaiveReceiverEchidna --config ./test/naive-receiver/config.yaml
...

echidna_test_contract_balance: failed!ğŸ’¥  
  Call sequence:
    flashLoan(0x62d69f6867a0a084c6d313943dc22023bc263691,353073667)

...
```
