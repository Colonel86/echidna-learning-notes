# 基于属性的模糊测试简介
Echidna 是一种基于属性的模糊器，我们在之前的博文 ([1](https://blog.trailofbits.com/2018/03/09/echidna-a-smart-fuzzer-for-ethereum/), [2](https://blog.trailofbits.com/2018/05/03/state-machine-testing-with-echidna/), [3](https://blog.trailofbits.com/2020/03/30/an-echidna-for-all-seasons/)) 中对此进行了描述。

## Fuzzing
Fuzzing 是安全社区中众所周知的技术。 它包括生成或多或少的随机输入以查找程序中的错误。 传统软件（例如 [AFL](http://lcamtuf.coredump.cx/afl/) 或 [LibFuzzer](https://llvm.org/docs/LibFuzzer.html)）的 Fuzzer 被认为是发现错误的有效工具。

除了纯粹随机生成输入之外，还有许多技术和策略可以生成良好的输入，包括：
- **从每次执行中获取反馈并使用它指导生成**。 例如，如果新生成的输入导致发现新路径，则生成最接近它的新输入是有意义的。
- **生成关于结构约束的输入**。 例如，如果您的输入包含带有校验和的标头，则让模糊器生成验证校验和的输入是有意义的。
- **使用已知输入生成新输入**。 如果您可以访问有效输入的大型数据集，您的模糊器可以从中生成新的输入，而不是每一代从头开始。 这些通常被称为种子。
  
## 基于属性的模糊测试
Echidna 属于特定的 fuzzer 家族：受 [QuickCheck](https://en.wikipedia.org/wiki/QuickCheck) 启发的基于属性的 fuzzing。 与试图发现崩溃的经典模糊器相比，Echidna 将尝试打破用户定义的invariants(不变式)。

在智能合约中，invariants是 Solidity 函数，可以表示合约可以达到的任何不正确或无效状态，包括：
- 不正确的访问控制：攻击者成为合约的所有者。
- 状态机不正确：合约暂停时可以转移代币。
- 不正确的算术：用户可能会下溢其余额并获得无限的免费代币。